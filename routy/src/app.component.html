
<div class="min-h-screen bg-slate-50 text-slate-900 pb-20 md:pb-0">
  
  @if (isLoggedIn()) {
    <!-- Desktop/Tablet Top Navbar -->
    <nav class="sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-slate-200 shadow-sm">
      <div class="max-w-4xl mx-auto px-4 h-16 flex items-center justify-between">
        
        <!-- Logo -->
        <a routerLink="/" class="flex items-center gap-2 group cursor-pointer">
          <div class="w-8 h-8 bg-gradient-to-br from-teal-500 to-blue-600 rounded-lg flex items-center justify-center text-white font-bold text-lg shadow-lg group-hover:shadow-teal-500/30 transition-all duration-300">
            R
          </div>
          <span class="font-bold text-xl bg-clip-text text-transparent bg-gradient-to-r from-slate-800 to-slate-600">Routy</span>
        </a>

        <!-- Desktop Links -->
        <div class="hidden md:flex items-center gap-6">
          <a routerLink="/" routerLinkActive="text-teal-600 bg-teal-50" [routerLinkActiveOptions]="{exact: true}" class="px-3 py-2 rounded-md font-medium text-slate-600 hover:text-teal-600 transition-colors">Feed</a>
          <a routerLink="/groups" routerLinkActive="text-teal-600 bg-teal-50" class="px-3 py-2 rounded-md font-medium text-slate-600 hover:text-teal-600 transition-colors">Trips</a>
          
          <!-- Notifiche (Mock) -->
          <button class="relative p-2 text-slate-400 hover:text-slate-600 transition-colors">
             <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/></svg>
             <span class="absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border border-white"></span>
          </button>

          <!-- Profile Widget -->
          <a routerLink="/profile" class="flex items-center gap-2 pl-4 border-l border-slate-200">
            <div class="w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-sm font-bold text-slate-600 overflow-hidden">
               @if (userProfile().avatar_url) {
                 <img [src]="userProfile().avatar_url" class="w-full h-full object-cover">
               } @else {
                 {{ userProfile().avatar_initial }}
               }
            </div>
          </a>
        </div>
      </div>
    </nav>
  }

  <!-- Main Content -->
  <main class="max-w-4xl mx-auto md:px-4 py-0 md:py-6">
    <router-outlet></router-outlet>
  </main>

  @if (isLoggedIn()) {
    <!-- Mobile Bottom Nav -->
    <div class="md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 px-6 py-3 flex justify-between items-center z-50 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]">
      <a routerLink="/" routerLinkActive="text-teal-600" [routerLinkActiveOptions]="{exact: true}" class="flex flex-col items-center gap-1 text-slate-400">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
        <span class="text-xs font-medium">Feed</span>
      </a>
      <a routerLink="/groups" routerLinkActive="text-teal-600" class="flex flex-col items-center gap-1 text-slate-400">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>
        <span class="text-xs font-medium">Trips</span>
      </a>
      <a routerLink="/profile" routerLinkActive="text-teal-600" class="flex flex-col items-center gap-1 text-slate-400">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
        <span class="text-xs font-medium">You</span>
      </a>
    </div>
  }
</div>
